(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9fa7f630"],{1511:function(t,e,r){"use strict";r.r(e);var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("UserProfileCard",{attrs:{profiles:t.profile,initialIsFollowed:t.isFollowed}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{Followings:t.Followings}}),r("br"),r("UserFollowersCard",{attrs:{Followers:t.Followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{Comments:t.Comments}}),r("br"),r("UserFavoritedRestaurantsCard",{attrs:{FavoritedRestaurants:t.FavoritedRestaurants}})],1)])],1)},a=[],i=r("1da1"),n=(r("96cf"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:t._f("emptyImage")(t.profile.image),width:"300px",height:"300px"}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(t.profile.name))]),r("p",{staticClass:"card-text"},[t._v(" "+t._s(t.profile.email)+" ")]),r("ul",{staticClass:"list-unstyled list-inline"},[r("li",[r("strong",[t._v(t._s(t.profile.commentsLength))]),t._v(" 已評論餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.favoritedLength))]),t._v(" 收藏的餐廳 ")]),r("li",[r("strong",[t._v(t._s(t.profile.followingsLength))]),t._v(" followings (追蹤者) ")]),r("li",[r("strong",[t._v(t._s(t.profile.followersLength))]),t._v(" followers (追隨者) ")])]),r("p",[t.currentUser.id===t.profile.id?[r("router-link",{attrs:{to:{name:"profile-page-edit",params:{id:t.profile.id}}}},[r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v(" edit ")])])]:[t.isFollowed?r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return t.deleteFollowing(t.profile.id)}}},[t._v(" 取消追蹤 ")]):r("button",{staticClass:"btn btn-primary mr-2",attrs:{type:"submit"},on:{click:function(e){return t.addFollowing(t.profile.id)}}},[t._v(" 追蹤 ")])]],2)])])])}),o=[],l=r("5530"),c=(r("b0c0"),r("2fa3")),d=r("2708"),u=r("4cce"),f=r("2f62"),m={computed:Object(l["a"])({},Object(f["b"])(["currentUser"])),props:{profiles:{type:Object,required:!0},initialIsFollowed:{type:Boolean,required:!0}},mixins:[d["a"]],data:function(){return{profile:{id:-1,name:"",email:"",image:"",commentsLength:0,favoritedLength:0,followingsLength:0,followersLength:0,isAdmin:!1},isFollowed:this.initialIsFollowed}},methods:{addFollowing:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].addFollowing(t);case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:e.isFollowed=!0,c["a"].fire({icon:"success",title:"您已成功追蹤"}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),c["a"].fire({icon:"error",title:"暫時無法追蹤該位使用者"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},deleteFollowing:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].deleteFollowing(t);case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:e.isFollowed=!1,c["a"].fire({icon:"success",title:"您已成功取消追蹤"}),r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),c["a"].fire({icon:"error",title:"暫時無法追蹤該位使用者"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},fetchUser:function(){var t=this.profiles,e=t.Comments,r=t.id,s=t.name,a=t.email,i=t.image,n=t.FavoritedRestaurants,o=t.Followers,c=t.Followings;this.profile=Object(l["a"])(Object(l["a"])({},this.profile),{},{id:r,name:s,email:a,image:i,commentsLength:e.length,favoritedLength:n.length,followingsLength:c.length,followersLength:o.length})}},watch:{profiles:{handler:function(){this.fetchUser()}},initialIsFollowed:{handler:function(){this.isFollowed=this.initialIsFollowed}}}},p=m,g=r("2877"),h=Object(g["a"])(p,n,o,!1,null,null,null),v=h.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.Followings.length))]),t._v(" followings (追蹤者) ")]),r("div",{staticClass:"card-body"},t._l(t.Followings,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"profile-page",params:{id:t.id}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},F=[],C={props:{Followings:{type:Array,required:!0}}},b=C,_=Object(g["a"])(b,w,F,!1,null,null,null),y=_.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.Followers.length))]),t._v(" followers (追隨者) ")]),r("div",{staticClass:"card-body"},t._l(t.Followers,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"profile-page",params:{id:t.id}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},k=[],R={props:{Followers:{type:Array,required:!0}}},U=R,j=Object(g["a"])(U,x,k,!1,null,null,null),O=j.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.Comments.length))]),t._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.Comments,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"restaurant-show",params:{id:t.RestaurantId}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:t.Restaurant.image,width:"60",height:"60"}})])})),1)])},I=[],E={props:{Comments:{type:Array,required:!0}}},$=E,q=Object(g["a"])($,L,I,!1,null,null,null),A=q.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[t._v(t._s(t.FavoritedRestaurants.length))]),t._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},t._l(t.FavoritedRestaurants,(function(t){return r("router-link",{key:t.id,attrs:{to:{name:"restaurant-show",params:{id:t.id}}}},[r("img",{staticClass:"avatar mr-1",attrs:{src:t.image,width:"60",height:"60"}})])})),1)])},N=[],S={props:{FavoritedRestaurants:{type:Array,required:!0}}},J=S,P=Object(g["a"])(J,D,N,!1,null,null,null),B=P.exports,T={data:function(){return{profile:{},isFollowed:!1,Comments:[],FavoritedRestaurants:[],Followers:[],Followings:[]}},components:{UserProfileCard:v,UserFollowingsCard:y,UserFollowersCard:O,UserCommentsCard:A,UserFavoritedRestaurantsCard:B},methods:{fetchUser:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u["a"].getUser(t);case 3:s=r.sent,a=s.data,e.profile=a.profile,e.isFollowed=a.isFollowed,e.Comments=a.profile.Comments,e.FavoritedRestaurants=a.profile.FavoritedRestaurants,e.Followers=a.profile.Followers,e.Followings=a.profile.Followings,r.next=17;break;case 13:r.prev=13,r.t0=r["catch"](0),console.log(r.t0),c["a"].fire({icon:"error",title:"無法載入使用者資料，請稍後再試"});case 17:case"end":return r.stop()}}),r,null,[[0,13]])})))()}},created:function(){this.fetchUser(this.$route.params.id)},beforeRouteUpdate:function(t,e,r){this.fetchUser(t.params.id),r()}},X=T,z=Object(g["a"])(X,s,a,!1,null,null,null);e["default"]=z.exports},2708:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return n}));var s=r("c1df"),a=r.n(s),i={filters:{fromNow:function(t){return t?a()(t).fromNow():"-"}}},n={filters:{emptyImage:function(t){return t||"https://via.placeholder.com/350x220/DFDFDF?text=No+Image"}}}},b0c0:function(t,e,r){var s=r("83ab"),a=r("5e77").EXISTS,i=r("e330"),n=r("9bf2").f,o=Function.prototype,l=i(o.toString),c=/^\s*function ([^ (]*)/,d=i(c.exec),u="name";s&&!a&&n(o,u,{configurable:!0,get:function(){try{return d(c,l(this))[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-9fa7f630.2de97adb.js.map